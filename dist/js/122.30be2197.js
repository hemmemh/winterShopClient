"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[122],{5122:function(t,e,s){s.r(e),s.d(e,{default:function(){return D}});var i=s(3396),a=s(9242);const m={key:0,class:"Basket__left"},o=(0,i._)("h2",{class:"Basket__title"},"Корзина",-1),u={class:"Basket__items"};function n(t,e,s,n,c,l){const r=(0,i.up)("BasketItemVue");return this.basket.length?((0,i.wg)(),(0,i.iD)("div",m,[o,(0,i._)("div",u,[(0,i.Wm)(a.W3,{name:"basket"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.basket,(t=>((0,i.wg)(),(0,i.j4)(r,{onRemoveItem:l.removeItem,key:t.product._id,item:t},null,8,["onRemoveItem","item"])))),128))])),_:1})])])):(0,i.kq)("",!0)}var c=s(2268);const l={class:"Basket__item item-basket"},r={class:"item-basket__image"},d={class:"item-basket__imageCover"},_={class:"item-basket__imageAbsolute"},k=["src"],h={class:"item-basket__info"},b={class:"item-basket__name"},p={class:"item-basket__params"},v={class:"item-basket__color"},I={class:"item-basket__size"},S={class:"item-basket__count"},w={class:"item-basket__countValue"},C={class:"item-basket__price"};function f(t,e,s,a,m,o){const u=(0,i.up)("MyNumberVue");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",{onClick:e[0]||(e[0]=(...t)=>o.removeItem&&o.removeItem(...t)),class:"item-basket__remove"}),(0,i._)("div",r,[(0,i._)("div",d,[(0,i._)("div",_,[(0,i._)("img",{src:`${m.API_URL}/${s.item.product.name}/${JSON.parse(s.item.product.images)[0]}`,alt:""},null,8,k)])])]),(0,i._)("div",h,[(0,i._)("div",b,(0,c.zw)(s.item.product.name),1),(0,i._)("div",p,[(0,i._)("div",v,"Цвет: "+(0,c.zw)(s.item.color),1),(0,i._)("div",I,"Размер: "+(0,c.zw)(s.item.size),1)])]),(0,i._)("div",S,[(0,i._)("div",{onClick:e[1]||(e[1]=(...t)=>o.minus&&o.minus(...t)),class:"item-basket__change _minus"}),(0,i._)("div",w,[(0,i.Wm)(u,{id:"ed",numberClass:"basket",min:1,max:30,modelValue:m.countItem,"onUpdate:modelValue":o.setCountItem},null,8,["modelValue","onUpdate:modelValue"])]),(0,i._)("div",{onClick:e[2]||(e[2]=(...t)=>o.plus&&o.plus(...t)),class:"item-basket__change _plus"})]),(0,i._)("div",C,(0,c.zw)(s.item.product.price),1)])}var g=s(3650),V=s(6028),B=s(5236),T=s(5565),y=s(7139),z={components:{MyNumberVue:B.Z},props:{item:{type:Object,default:{}}},data(){return{countItem:this.item.count,API_URL:V.T5}},computed:{...(0,y.rn)({count:t=>t.basket.count,totalSum:t=>t.basket.totalSum})},methods:{...(0,y.OI)({setTotalSum:"basket/setTotalSum",setCount:"basket/setCount"}),setCountItem(t){this.setTotalSum(this.totalSum-this.countItem*this.item.product.price+t*this.item.product.price),this.countItem=t},plus(){this.countItem<30&&(this.countItem+=1,(0,g.Yv)({id:this.item._id,count:this.countItem}).then((t=>{this.setTotalSum(this.totalSum-(this.countItem-1)*this.item.product.price+this.countItem*this.item.product.price)})))},minus(){this.countItem>1&&(this.countItem-=1,(0,g.Yv)({id:this.item._id,count:this.countItem}).then((t=>{this.setTotalSum(this.totalSum-this.item.product.price)})))},removeItem(){(0,g.ff)({id:this.item.product._id,basketId:T.Z.state.user.user.basket}).then((t=>{this.$emit("removeItem",t),this.setTotalSum(this.totalSum-this.item.product.price*this.countItem)}))}}},Z=s(89);const $=(0,Z.Z)(z,[["render",f]]);var O=$,R=s(9983),U={components:{BasketItemVue:O,LoaderVue:R.Z},data(){return{basket:[],loaded:!1}},computed:{...(0,y.rn)({totalSum:t=>t.basket.totalSum})},methods:{...(0,y.OI)({setCount:"basket/setCount",setTotalSum:"basket/setTotalSum",setView:"basket/setView"}),...(0,y.nv)({setBasket:"basket/setBasket"}),removeItem(t){this.basket=t.basketItems,this.setCount(this.basket.length)}},async mounted(){this.basket=await this.setBasket(this.$store.state.user.user.id)||[]}};const A=(0,Z.Z)(U,[["render",n]]);var D=A}}]);
//# sourceMappingURL=122.30be2197.js.map